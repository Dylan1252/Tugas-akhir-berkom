<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Alokasi Ruang Kuliah - Kelompok 6</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .room-card { transition: all 0.2s; }
        .room-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 flex flex-col min-h-screen">

    <!-- Header / Navbar -->
    <nav class="bg-blue-900 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-university text-2xl text-yellow-400"></i>
                <div>
                    <h1 class="text-xl font-bold leading-tight">Smart Classroom Allocation</h1>
                    <p class="text-xs text-blue-200">ITB Jatinangor - Kelompok 6</p>
                </div>
            </div>
            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-6">
                <button onclick="switchTab('dashboard')" class="nav-btn hover:text-yellow-400 transition font-medium text-yellow-400" id="btn-dashboard">
                    <i class="fas fa-chart-pie mr-1"></i> Dashboard
                </button>
                <button onclick="switchTab('allocation')" class="nav-btn hover:text-yellow-400 transition font-medium" id="btn-allocation">
                    <i class="fas fa-magic mr-1"></i> Auto Alokasi
                </button>
                <button onclick="switchTab('reschedule')" class="nav-btn hover:text-yellow-400 transition font-medium" id="btn-reschedule">
                    <i class="fas fa-calendar-alt mr-1"></i> Reschedule
                </button>
            </div>
            <!-- Mobile Menu Button -->
            <button class="md:hidden text-2xl focus:outline-none" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-blue-800 pb-4">
            <a href="#" onclick="switchTab('dashboard')" class="block px-4 py-2 hover:bg-blue-700">Dashboard</a>
            <a href="#" onclick="switchTab('allocation')" class="block px-4 py-2 hover:bg-blue-700">Auto Alokasi</a>
            <a href="#" onclick="switchTab('reschedule')" class="block px-4 py-2 hover:bg-blue-700">Reschedule</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6">

        <!-- Notification Toast -->
        <div id="toast" class="fixed bottom-5 right-5 hidden bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl z-50 flex items-center gap-3 transform transition-all duration-300 translate-y-20">
            <i class="fas fa-check-circle text-xl"></i>
            <span id="toast-msg">Operasi Berhasil</span>
        </div>

        <!-- VIEW: DASHBOARD (Real-time Availability) -->
        <section id="view-dashboard" class="fade-in block">
            <div class="bg-white rounded-xl shadow-md p-6 mb-6 border-l-4 border-blue-600">
                <h2 class="text-2xl font-bold mb-2 text-gray-800">Cek Ketersediaan Gedung</h2>
                <p class="text-gray-600 mb-4">Lihat status ruangan secara real-time berdasarkan waktu.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Pilih Gedung</label>
                        <select id="dash-gedung-select" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none" onchange="renderDashboard()">
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Waktu / Sesi</label>
                        <select id="dash-time-select" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none" onchange="renderDashboard()">
                            <option value="Senin 07.00">Senin 07.00</option>
                            <option value="Senin 08.00">Senin 08.00</option>
                            <option value="Senin 09.00">Senin 09.00</option>
                            <option value="Senin 10.00">Senin 10.00</option>
                            <option value="Senin 13.00">Senin 13.00</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button onclick="renderDashboard()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition">
                            <i class="fas fa-sync-alt mr-2"></i> Refresh
                        </button>
                    </div>
                </div>
            </div>

            <!-- Visualization Area -->
            <div id="building-visual" class="space-y-4">
                <!-- Content generated by JS -->
            </div>
        </section>

        <!-- VIEW: AUTO ALLOCATION -->
        <section id="view-allocation" class="hidden fade-in">
            <div class="max-w-2xl mx-auto">
                <div class="bg-white rounded-xl shadow-md p-8 border-t-4 border-green-500">
                    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800"><i class="fas fa-robot mr-2 text-green-600"></i>Rekomendasi Cerdas</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Mata Kuliah</label>
                            <input type="text" id="alloc-matkul" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="Contoh: IF1234 - Algoritma">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jumlah Mahasiswa</label>
                                <input type="number" id="alloc-mhs" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Waktu</label>
                                <select id="alloc-waktu" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
                                    <option value="Senin 07.00">Senin 07.00</option>
                                    <option value="Senin 08.00">Senin 08.00</option>
                                    <option value="Senin 09.00">Senin 09.00</option>
                                    <option value="Senin 10.00">Senin 10.00</option>
                                    <option value="Senin 13.00">Senin 13.00</option>
                                </select>
                            </div>
                        </div>

                        <button onclick="findRecommendation()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition transform active:scale-95 shadow-lg">
                            Cari Ruangan Terbaik
                        </button>
                    </div>
                </div>

                <!-- Result Card -->
                <div id="alloc-result" class="mt-6 hidden">
                    <!-- JS fills this -->
                </div>
            </div>
        </section>

        <!-- VIEW: RESCHEDULE -->
        <section id="view-reschedule" class="hidden fade-in">
            <div class="max-w-4xl mx-auto">
                <div class="bg-white rounded-xl shadow-md p-6 mb-6 border-l-4 border-yellow-500">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800">Reschedule Jadwal</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="col-span-1">
                            <label class="block text-xs font-bold text-gray-500 uppercase">Kode Ruangan Saat Ini</label>
                            <!-- UPDATED: Changed Input to Select -->
                            <select id="resch-kode" class="w-full p-2 border border-gray-300 rounded mt-1 bg-white focus:ring-2 focus:ring-yellow-500 outline-none">
                                <option value="">-- Pilih Ruangan --</option>
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <div class="col-span-1">
                            <label class="block text-xs font-bold text-gray-500 uppercase">Waktu Saat Ini</label>
                            <select id="resch-waktu-lama" class="w-full p-2 border border-gray-300 rounded mt-1">
                                <option value="Senin 07.00">Senin 07.00</option>
                                <option value="Senin 08.00">Senin 08.00</option>
                                <option value="Senin 09.00">Senin 09.00</option>
                                <option value="Senin 10.00">Senin 10.00</option>
                                <option value="Senin 13.00">Senin 13.00</option>
                            </select>
                        </div>
                        <div class="col-span-1 flex items-end">
                            <button onclick="checkCurrentSchedule()" class="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-2 rounded">
                                <i class="fas fa-search"></i> Cek Jadwal
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Confirmation & Target Time -->
                    <div id="resch-step-2" class="hidden bg-gray-50 p-4 rounded border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="font-bold text-lg text-blue-900" id="resch-matkul-name">-</h3>
                                <p class="text-sm text-gray-600">Kapasitas Ruang Asal: <span id="resch-cap-asal" class="font-mono font-bold">0</span></p>
                            </div>
                            <span class="bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded">Jadwal Ditemukan</span>
                        </div>
                        
                        <hr class="border-gray-300 my-3">
                        
                        <label class="block text-sm font-bold text-gray-700 mb-2">Pilih Waktu Baru:</label>
                        <div class="flex gap-2">
                            <select id="resch-waktu-baru" class="flex-grow p-2 border border-gray-300 rounded">
                                <option value="Senin 07.00">Senin 07.00</option>
                                <option value="Senin 08.00">Senin 08.00</option>
                                <option value="Senin 09.00">Senin 09.00</option>
                                <option value="Senin 10.00">Senin 10.00</option>
                                <option value="Senin 13.00">Senin 13.00</option>
                            </select>
                            <button onclick="findRescheduleOptions()" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded shadow">
                                Cari Slot
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Result List -->
                <div id="resch-options" class="grid grid-cols-1 gap-3">
                    <!-- Options generated here -->
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-gray-200 mt-auto py-6">
        <div class="container mx-auto px-4 text-center">
            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-2">Anggota Kelompok 6</h3>
            <div class="flex flex-wrap justify-center gap-4 text-xs text-gray-600">
                <span>19625042 - Vinandiar F.</span>
                <span>19625086 - Dylan Frederico K.</span>
                <span>19625126 - Jonathan Lewie</span>
                <span>19625182 - Ernest Clarence G.</span>
                <span>19625190 - M. Fakhriyan Rizki</span>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // ================= DATA STRUCTURES =================
        class Ruangan {
            constructor(kode, kapasitas, fasilitas) {
                this.kode = kode;
                this.kapasitas = kapasitas;
                this.fasilitas = fasilitas;
                this.jadwal = {}; // { "Waktu": "Nama Matkul" }
            }

            isAvailable(waktu) {
                return !this.jadwal[waktu];
            }

            book(waktu, matkul) {
                this.jadwal[waktu] = matkul;
            }

            cancel(waktu) {
                if(this.jadwal[waktu]) {
                    delete this.jadwal[waktu];
                    return true;
                }
                return false;
            }
        }

        class Lantai {
            constructor(nomor, namaGedung, kapasitas) {
                this.nomor = nomor;
                this.slots = [];
                
                // Logic Fasilitas Homogen
                let fac = "Ruang Diskusi (Meja Bundar)";
                if(kapasitas >= 100) fac = "Theater Room (Proyektor Besar)";
                else if(kapasitas >= 50) fac = "Kelas Reguler (Smartboard)";

                this.fasilitas = fac;
                this.kapasitas = kapasitas;

                // 3 Slots
                ['A', 'B', 'C'].forEach(label => {
                    this.slots.push(new Ruangan(`${namaGedung}-L${nomor}-${label}`, kapasitas, fac));
                });
            }
        }

        class Gedung {
            constructor(nama, jumLantai) {
                this.nama = nama;
                this.lantaiList = [];
                for(let i=1; i<=jumLantai; i++) {
                    // Random capacity for simulation
                    const caps = [30, 40, 50, 60, 80, 100, 120, 150];
                    const cap = caps[Math.floor(Math.random() * caps.length)];
                    this.lantaiList.push(new Lantai(i, nama, cap));
                }
            }
        }

        // ================= APP STATE =================
        const appData = {
            gedung: []
        };

        // Initialize Data
        function initApp() {
            const configs = [
                ["GKU 1", 3], ["GKU 2", 3], ["GKU 3", 3],
                ["Rektorat", 2],
                ["Akademik A", 2], ["Akademik B", 2], ["Akademik C", 2], ["Akademik D", 2], ["Akademik E", 2]
            ];

            configs.forEach(([nama, floors]) => {
                appData.gedung.push(new Gedung(nama, floors));
            });

            // Populate Dropdown Dashboard
            const sel = document.getElementById('dash-gedung-select');
            appData.gedung.forEach((g, idx) => {
                const opt = document.createElement('option');
                opt.value = idx;
                opt.text = g.nama;
                sel.add(opt);
            });

            // Populate Reschedule Dropdown (NEW)
            const reschSel = document.getElementById('resch-kode');
            appData.gedung.forEach(g => {
                g.lantaiList.forEach(l => {
                    l.slots.forEach(r => {
                        const opt = document.createElement('option');
                        opt.value = r.kode;
                        opt.text = r.kode; // e.g. GKU 1-L1-A
                        reschSel.add(opt);
                    });
                });
            });

            renderDashboard();
        }

        // ================= UI FUNCTIONS =================
        function switchTab(tabName) {
            // Hide all
            ['dashboard', 'allocation', 'reschedule'].forEach(t => {
                document.getElementById('view-' + t).classList.add('hidden');
                document.getElementById('btn-' + t).classList.remove('text-yellow-400');
                document.getElementById('btn-' + t).classList.add('text-blue-100');
            });

            // Show selected
            document.getElementById('view-' + tabName).classList.remove('hidden');
            document.getElementById('btn-' + tabName).classList.add('text-yellow-400');
            document.getElementById('btn-' + tabName).classList.remove('text-blue-100');

            if(tabName === 'dashboard') renderDashboard();
        }

        function showToast(msg, type='success') {
            const toast = document.getElementById('toast');
            const msgSpan = document.getElementById('toast-msg');
            
            toast.className = `fixed bottom-5 right-5 flex items-center gap-3 px-6 py-3 rounded-lg shadow-xl z-50 transform transition-all duration-300 translate-y-0 ${type === 'error' ? 'bg-red-600 text-white' : 'bg-green-600 text-white'}`;
            
            msgSpan.innerText = msg;
            toast.classList.remove('hidden', 'translate-y-20');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20');
                setTimeout(() => toast.classList.add('hidden'), 300);
            }, 3000);
        }

        // ================= FEATURE 1: DASHBOARD =================
        function renderDashboard() {
            const gdgIdx = document.getElementById('dash-gedung-select').value;
            const time = document.getElementById('dash-time-select').value;
            const container = document.getElementById('building-visual');
            
            if(gdgIdx === "") return;

            const gedung = appData.gedung[gdgIdx];
            container.innerHTML = '';

            gedung.lantaiList.forEach(lantai => {
                // Floor Card
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow p-4 border border-gray-200';
                
                let slotsHtml = '';
                lantai.slots.forEach(ruang => {
                    const isFree = ruang.isAvailable(time);
                    const statusClass = isFree ? 'bg-green-100 text-green-800 border-green-200' : 'bg-red-100 text-red-800 border-red-200';
                    const icon = isFree ? 'fa-door-open' : 'fa-door-closed';
                    const statusText = isFree ? 'KOSONG' : `TERISI<br><span class="text-xs opacity-75">${ruang.jadwal[time]}</span>`;
                    
                    slotsHtml += `
                        <div class="flex-1 p-3 rounded border ${statusClass} text-center transition hover:shadow-md">
                            <div class="text-lg mb-1"><i class="fas ${icon}"></i></div>
                            <div class="font-bold text-sm mb-1">${ruang.kode.split('-').pop()}</div>
                            <div class="text-xs leading-tight font-semibold">${statusText}</div>
                        </div>
                    `;
                });

                card.innerHTML = `
                    <div class="flex flex-col md:flex-row gap-4 items-center">
                        <div class="md:w-1/4 text-center md:text-left">
                            <div class="text-2xl font-bold text-gray-700">Lantai ${lantai.nomor}</div>
                            <div class="text-sm text-gray-500"><i class="fas fa-chair mr-1"></i> Kapasitas: ${lantai.kapasitas}</div>
                            <div class="text-xs text-gray-400 mt-1">${lantai.fasilitas}</div>
                        </div>
                        <div class="md:w-3/4 w-full flex gap-2">
                            ${slotsHtml}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ================= FEATURE 2: AUTO ALLOCATION =================
        function findRecommendation() {
            const matkul = document.getElementById('alloc-matkul').value;
            const mhs = parseInt(document.getElementById('alloc-mhs').value);
            const time = document.getElementById('alloc-waktu').value;
            const resContainer = document.getElementById('alloc-result');

            if(!matkul || !mhs) {
                showToast("Mohon lengkapi data!", "error");
                return;
            }

            let candidates = [];

            appData.gedung.forEach(g => {
                g.lantaiList.forEach(l => {
                    if(l.kapasitas >= mhs) {
                        l.slots.forEach(r => {
                            if(r.isAvailable(time)) {
                                candidates.push({
                                    ruang: r,
                                    gedung: g.nama,
                                    waste: r.kapasitas - mhs
                                });
                            }
                        });
                    }
                });
            });

            if(candidates.length === 0) {
                resContainer.innerHTML = `
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded shadow">
                        <div class="flex">
                            <div class="flex-shrink-0"><i class="fas fa-exclamation-circle text-red-500"></i></div>
                            <div class="ml-3">
                                <p class="text-sm text-red-700 font-bold">Tidak ada ruangan tersedia</p>
                                <p class="text-xs text-red-600">Cobalah kurangi jumlah mahasiswa atau ganti waktu.</p>
                            </div>
                        </div>
                    </div>
                `;
                resContainer.classList.remove('hidden');
                return;
            }

            // Sort by waste (Best Fit)
            candidates.sort((a, b) => a.waste - b.waste);
            const best = candidates[0];

            resContainer.innerHTML = `
                <div class="bg-green-50 border border-green-200 rounded-xl p-6 shadow-lg text-center relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">BEST MATCH</div>
                    
                    <h3 class="text-gray-500 uppercase tracking-widest text-xs font-bold mb-1">Rekomendasi Sistem</h3>
                    <div class="text-3xl font-bold text-green-700 mb-2">${best.ruang.kode}</div>
                    <div class="text-sm text-gray-600 mb-4">${best.gedung} &bull; Kapasitas ${best.ruang.kapasitas} <span class="text-green-600">(Sisa ${best.waste})</span></div>
                    
                    <div class="bg-white p-3 rounded border border-gray-100 inline-block mb-4 text-xs text-gray-500">
                        <i class="fas fa-tools mr-1"></i> ${best.ruang.fasilitas}
                    </div>

                    <button onclick="confirmBooking('${best.ruang.kode}', '${time}', '${matkul}')" class="block w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded shadow transition">
                        Ambil Ruangan Ini
                    </button>
                </div>
            `;
            resContainer.classList.remove('hidden');
        }

        function confirmBooking(kode, time, matkul) {
            // Find room object
            for(let g of appData.gedung) {
                for(let l of g.lantaiList) {
                    for(let r of l.slots) {
                        if(r.kode === kode) {
                            r.book(time, matkul);
                            showToast(`Berhasil booking ${kode} untuk ${matkul}`);
                            document.getElementById('alloc-result').classList.add('hidden');
                            document.getElementById('alloc-matkul').value = '';
                            document.getElementById('alloc-mhs').value = '';
                            return;
                        }
                    }
                }
            }
        }

        // ================= FEATURE 3: RESCHEDULE =================
        let currentRescheduleData = null; // { ruangObj, oldTime, matkulName }

        function checkCurrentSchedule() {
            const kode = document.getElementById('resch-kode').value.trim();
            const time = document.getElementById('resch-waktu-lama').value;
            
            if(!kode) {
                showToast("Pilih ruangan terlebih dahulu!", "error");
                return;
            }

            let found = null;
            
            for(let g of appData.gedung) {
                for(let l of g.lantaiList) {
                    for(let r of l.slots) {
                        if(r.kode === kode) {
                            found = r;
                            break;
                        }
                    }
                }
            }

            if(found && !found.isAvailable(time)) {
                currentRescheduleData = {
                    ruangObj: found,
                    oldTime: time,
                    matkulName: found.jadwal[time]
                };
                
                document.getElementById('resch-step-2').classList.remove('hidden');
                document.getElementById('resch-matkul-name').innerText = currentRescheduleData.matkulName;
                document.getElementById('resch-cap-asal').innerText = currentRescheduleData.ruangObj.kapasitas;
                showToast("Jadwal ditemukan!", "success");
            } else {
                showToast("Jadwal tidak ditemukan atau ruangan kosong.", "error");
                document.getElementById('resch-step-2').classList.add('hidden');
                document.getElementById('resch-options').innerHTML = '';
            }
        }

        function findRescheduleOptions() {
            const newTime = document.getElementById('resch-waktu-baru').value;
            const minCap = currentRescheduleData.ruangObj.kapasitas;
            const container = document.getElementById('resch-options');
            
            container.innerHTML = '';
            let count = 0;

            appData.gedung.forEach(g => {
                g.lantaiList.forEach(l => {
                    if(l.kapasitas >= minCap) {
                        l.slots.forEach(r => {
                            if(r.isAvailable(newTime)) {
                                count++;
                                const div = document.createElement('div');
                                div.className = 'bg-white p-3 rounded border border-gray-200 flex justify-between items-center hover:bg-gray-50';
                                div.innerHTML = `
                                    <div>
                                        <div class="font-bold text-gray-800">${r.kode}</div>
                                        <div class="text-xs text-gray-500">${g.nama} &bull; Kap: ${r.kapasitas}</div>
                                    </div>
                                    <button onclick="executeReschedule('${r.kode}', '${newTime}')" class="bg-blue-600 text-white text-xs px-3 py-2 rounded font-bold hover:bg-blue-700">Pindah Sini</button>
                                `;
                                container.appendChild(div);
                            }
                        });
                    }
                });
            });

            if(count === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 italic p-4">Tidak ada ruangan pengganti yang tersedia.</div>';
            }
        }

        function executeReschedule(targetKode, newTime) {
            // Find target room
            let targetRoom = null;
            for(let g of appData.gedung) {
                for(let l of g.lantaiList) {
                    for(let r of l.slots) {
                        if(r.kode === targetKode) targetRoom = r;
                    }
                }
            }

            if(targetRoom) {
                // Cancel old
                currentRescheduleData.ruangObj.cancel(currentRescheduleData.oldTime);
                // Book new
                targetRoom.book(newTime, currentRescheduleData.matkulName);
                
                showToast("Jadwal Berhasil Dipindahkan!");
                
                // Reset UI
                document.getElementById('resch-kode').value = '';
                document.getElementById('resch-step-2').classList.add('hidden');
                document.getElementById('resch-options').innerHTML = '';
            }
        }

        // Init on Load
        window.onload = initApp;

    </script>
</body>
</html>
